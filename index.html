<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>PortfÃ¶y Takip</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
body { font-family: Arial; background:#0f172a; color:white; margin:0; padding:15px;}
h1 { text-align:center; margin-bottom:20px; }

.card {
  background:#1e293b;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

table {
  width:100%;
  border-collapse: collapse;
  margin-top:10px;
}

th, td {
  padding:10px;
  text-align:center;
  border-bottom:1px solid #334155;
}

th { background:#334155; }

.positive { color:#22c55e; font-weight:bold; }
.negative { color:#ef4444; font-weight:bold; }

input {
  padding:8px;
  margin:5px;
  border-radius:6px;
  border:none;
  width:160px;
}

button {
  padding:8px 15px;
  border:none;
  border-radius:6px;
  background:#22c55e;
  color:white;
  cursor:pointer;
  font-weight:bold;
}

button:hover { opacity:0.8; }

.big { font-size:20px; font-weight:bold; margin-bottom:5px; }
</style>
</head>
<body>

<h1>ðŸ“Š PortfÃ¶y Takip</h1>

<div class="card">
  <div class="big" id="totalValue">Toplam DeÄŸer: 0,00 TL</div>
  <div class="big" id="totalProfit">Toplam Kar: 0,00 TL (0%)</div>
</div>

<div class="card">
  <h3>Hisse Ekle</h3>
  <input type="text" id="code" placeholder="Hisse Kodu">
  <input type="number" id="lot" placeholder="Lot">
  <input type="number" id="value" placeholder="Toplam DeÄŸer (TL)">
  <input type="number" id="profitTL" placeholder="Kar (TL)">
  <input type="number" id="profitPercent" placeholder="Kar (%)">
  <button onclick="addStock()">Ekle</button>
</div>

<div class="card">
  <table>
    <thead>
      <tr>
        <th>Hisse</th>
        <th>Lot</th>
        <th>Maliyet</th>
        <th>Toplam DeÄŸer</th>
        <th>Kar (TL)</th>
        <th>Kar (%)</th>
      </tr>
    </thead>
    <tbody id="portfolioBody"></tbody>
  </table>
</div>

<script>

let portfolio = [];

function formatNumber(num){
  return num.toLocaleString("tr-TR",{minimumFractionDigits:2, maximumFractionDigits:2});
}

function addStock(){
  const code = document.getElementById("code").value.toUpperCase();
  const lot = parseFloat(document.getElementById("lot").value);
  const value = parseFloat(document.getElementById("value").value);
  const profitTL = parseFloat(document.getElementById("profitTL").value);
  const profitPercent = parseFloat(document.getElementById("profitPercent").value);

  if(!code || !lot || !value || profitTL === null || profitPercent === null){
    alert("TÃ¼m alanlarÄ± doldurun.");
    return;
  }

  const cost = value - profitTL; // OTOMATÄ°K MALÄ°YET

  portfolio.push({ code, lot, cost, value, profitTL, profitPercent });

  updateTable();

  document.querySelectorAll("input").forEach(input => input.value="");
}

function updateTable(){
  const tbody = document.getElementById("portfolioBody");
  tbody.innerHTML = "";

  let totalValue = 0;
  let totalCost = 0;

  portfolio.forEach(stock => {

    totalValue += stock.value;
    totalCost += stock.cost;

    tbody.innerHTML += `
      <tr>
        <td>${stock.code}</td>
        <td>${stock.lot}</td>
        <td>${formatNumber(stock.cost)} TL</td>
        <td>${formatNumber(stock.value)} TL</td>
        <td class="${stock.profitTL>=0?'positive':'negative'}">${formatNumber(stock.profitTL)} TL</td>
        <td class="${stock.profitPercent>=0?'positive':'negative'}">${stock.profitPercent}%</td>
      </tr>
    `;
  });

  const totalProfit = totalValue - totalCost;
  const totalPercent = totalCost === 0 ? 0 : (totalProfit/totalCost)*100;

  document.getElementById("totalValue").innerText =
    "Toplam DeÄŸer: " + formatNumber(totalValue) + " TL";

  document.getElementById("totalProfit").innerHTML =
    "Toplam Kar: <span class='" +
    (totalProfit>=0?'positive':'negative') +
    "'>" + formatNumber(totalProfit) + " TL (" +
    totalPercent.toFixed(2) + "%)</span>";
}

</script>

</body>
</html>
